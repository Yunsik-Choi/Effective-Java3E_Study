# 아이템06 (불필요한 객체 생성을 피하라)

<br>

**똑같은 기능의 객체를 매번 생성하기 보다는 객체 하나를 재사용하는 편이 나을 때가 많다. 필요한 객체만을 생성해 성능을 끌어올리자**

<br>

**잘못된 예**

```jsx
String s = new String("hello");
```

위 코드는 실행될 때마다 생성자를 사용해 String 인스턴스를 새로 만든다. 

<br>

**올바른 예**

```jsx
String s = "hello";
```

위 코드는 새로운 인스턴스를 매번 만드는 대신 하나의 String 인스턴스를 사용한다. 나아가 이 방식은 같은 가상 머신 안에서 이와 똑같은 문자열 리터럴을 사용하는 모든 코드가 같은 객체를 재사용함이 보장된다.

<br>

## 주의사항

- 생성자 대신 정적 팩터리 메서드를 제공하는 불변 클래스에서는 정적 팩터리 메서드를 사용해 불필요한 객체 생성을 피할 수 있다. 가령 가변객체여도 사용중 변경되지 않는다면 재사용이 가능하다.
- 생성 비용이 비싼 객체는 캐싱하여 재사용하자.

<br>

**예시**

```jsx
public class JAVA {
	private final static Boolean TRUE = Boolean.TRUE;
	
	private static Boolean getTrue() {
		return JAVA.TRUE;
	}
}
```

만약 JAVA클래스가 초기화된 후 getTrue 메서드를 한 번도 호출하지 않는다면 TRUE 필드는 쓸데없이 초기화된 꼴이므로 지연 초기화(Lazy initialization)을 통해 초기화를 없앨 수는 있지만 보통 코드를 복잡하게하고 성능상 크게 개선되지는 않는다.

<br>

**불필요한 객체를 만들어내는 또 다른 예로는 오토박싱이 있다.**

- 오토박싱은 기본 타입과 그에 대응하는 박싱된 기본 타입의 구분을 흐려주지만 완전히 없애주는 것은 아니다.
- 박싱된 기본 타입보다는 기본 타입을 사용하고 의도치 않은 오토박싱이 숨어들지 않도록 주의하자

<br>

## 정리

```jsx
프로그램의 명확성,간결성,기능을 위해서 객체를 추가로 생성하는 것이라면 일반적으로 좋다.
아주 무거운 객체가 아닌 이상 객체 풀을 만들지는 말자.
객체를 잘못 재사용 하게되면 버그와 보안 구멍으로 이어져 더욱 큰 피해를 끼친다.
불필요한 객체 생성은 그저 코드 형태와 성능에만 영향을 미치므로 필요한 상황에만 재사용하자.
```